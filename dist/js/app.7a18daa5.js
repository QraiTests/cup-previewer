(function(){"use strict";var t={8104:function(t,e,n){var r=n(6369),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("MugPreview",{ref:"preview"}),e("div",{staticClass:"mug-panel"},[e("MugInput",{attrs:{"data-style-outline":"",type:"file"},on:{change:t.onUpload}}),e("MugButton",{attrs:{"data-style-accent":""},on:{click:t.onDownload}},[t._v("Download")])],1)],1)},o=[],a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mug-preview"},[e("canvas",{ref:"canvas"})])},u=[],s={name:"MugPreview",emits:["render"],props:{image:String},mounted(){let t=this.$refs.canvas;t.width=500,t.height=500,this.setUpper("")},methods:{getURL(){return this.$refs.canvas.toDataURL("image/png")},setUpper(t){let e=this.$refs.canvas;const r=e.getContext("2d");r.clearRect(0,0,e.width,e.height);let i=new Image(500,450);i.src=n(7711),i.addEventListener("load",(()=>{this.drawBase(i);let e=new Image;e.src=t,e.addEventListener("load",(()=>{this.drawUpper(e),this.$emit("render")}))}))},drawBase(t){const e=this.$refs.canvas,n=e.getContext("2d"),r={ratio:t.width/t.height,width:0,height:0,offsetX:0,offsetY:0};r.ratio>=1?(r.width=e.width>t.width?t.width:e.width,r.height=r.width/r.ratio):(r.height=e.height>t.height?t.height:e.height,r.width=r.height*r.ratio),r.offsetX=e.width>r.width?(e.width-r.width)/2:0,r.offsetY=e.height>r.height?(e.height-r.height)/2:0,n.drawImage(t,r.offsetX,r.offsetY,r.width,r.height)},drawUpper(t){const e=this.$refs.canvas,n=e.getContext("2d");n.imageSmoothingEnabled=!0;let r=t.width,i=t.height,{x_offset:o,y_offset:a,a:u,b:s,c:c,d:f}={x_offset:110,y_offset:125,a:110,b:15,c:245,d:3.5},h=r/(f*u);for(let l=0;l<r;l+=1){let e=s/u*Math.sqrt(u*u-(l-u)*(l-u));n.drawImage(t,l*h,0,r/2,i,l+o,e+a,1,c)}}}},c=s,f=n(1001),h=(0,f.Z)(c,a,u,!1,null,"0058cefb",null),l=h.exports,d=function(){var t=this,e=t._self._c;return e("button",t._b({on:{click:function(e){return t.$emit("click",e)}}},"button",t.$props,!1),[t._t("default")],2)},p=[],g={name:"MugButton"},w=g,v=(0,f.Z)(w,d,p,!1,null,"19905b20",null),m=v.exports,b=function(){var t=this,e=t._self._c;return e("input",t._b({on:{change:function(e){return t.$emit("change",e)}}},"input",t.$props,!1))},_=[],x={name:"MugInput"},y=x,$=(0,f.Z)(y,b,_,!1,null,"3355694c",null),O=$.exports,U={name:"App",components:{MugPreview:l,MugButton:m,MugInput:O},methods:{onUpload(t){let e=t.target.files[0];this.$refs.preview.setUpper(URL.createObjectURL(e))},onDownload(){let t=this.$refs.preview.getURL(),e=document.createElement("a");e.download="result.png",e.href=t,e.click(),console.log(t)}}},M=U,k=(0,f.Z)(M,i,o,!1,null,null,null),j=k.exports;r.ZP.config.productionTip=!1,new r.ZP({render:t=>t(j)}).$mount("#app")},7711:function(t,e,n){t.exports=n.p+"img/mug.00afdf65.png"}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(e,r,i,o){if(!r){var a=1/0;for(f=0;f<t.length;f++){r=t[f][0],i=t[f][1],o=t[f][2];for(var u=!0,s=0;s<r.length;s++)(!1&o||a>=o)&&Object.keys(n.O).every((function(t){return n.O[t](r[s])}))?r.splice(s--,1):(u=!1,o<a&&(a=o));if(u){t.splice(f--,1);var c=i();void 0!==c&&(e=c)}}return e}o=o||0;for(var f=t.length;f>0&&t[f-1][2]>o;f--)t[f]=t[f-1];t[f]=[r,i,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.p="/"}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var i,o,a=r[0],u=r[1],s=r[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)var f=s(n)}for(e&&e(r);c<a.length;c++)o=a[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(f)},r=self["webpackChunkcup_previewer"]=self["webpackChunkcup_previewer"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(8104)}));r=n.O(r)})();
//# sourceMappingURL=app.7a18daa5.js.map